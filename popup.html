<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>YoSelection</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <header class="header">
    <div>
      <h1>YoSelection</h1>
      <div class="sub">Syncs via Chrome • Exports PNG</div>
    </div>
    <div class="inline">
      <button id="btn-open-sidebar" type="button">Open Side Panel</button>
      <select id="export-scope" aria-label="Export scope">
        <option value="active">Current tab</option>
        <option value="all">All lists</option>
        <option value="wish">Wish List</option>
        <option value="sell">Sell</option>
        <option value="sellSets">Sell Sets</option>
        <option value="buy">Buy</option>
      </select>
      <button id="btn-export" class="primary" type="button">Export PNG</button>
    </div>
  </header>

  <section class="card">
    <h2>Add item</h2>
    <div class="row">
      <label class="lbl">Section</label>
      <select id="in-section">
        <option value="wish">Wish List</option>
        <option value="sell">Sell</option>
        <option value="sellSets">Sell Sets</option>
        <option value="buy">Buy</option>
      </select>
    </div>

    <div class="row">
      <label class="lbl">Search</label>
      <div class="inline">
        <input id="in-query" type="text" placeholder="Type an item name...">
        <button id="btn-search" type="button">Search</button>
      </div>
      <div class="hint">Uses api.yoworld.info search (manual use only).</div>
    </div>

    <div class="row">
      <label class="lbl">Note (optional)</label>
      <input id="in-note" type="text" placeholder="e.g., 2.5m, swap for..., any color">
    </div>

    <div id="results" class="results"></div>
  </section>

  <nav class="tabs" aria-label="Template Sections">
    <button class="tab is-active" type="button" data-tab="wish">Wish List</button>
    <button class="tab" type="button" data-tab="sell">Sell</button>
    <button class="tab" type="button" data-tab="sellSets">Sell Sets</button>
    <button class="tab" type="button" data-tab="buy">Buy</button>
    <button class="tab" type="button" data-tab="pricecheck">Price Check</button>
    <button class="tab" type="button" data-tab="settings">Settings</button>
  </nav>

  <section class="card" data-panel="wish">
    <div class="section-head">
      <h2>Wish List</h2>
      <div class="inline">
        <button id="btn-refresh-wish" class="ghost" type="button">Refresh</button>
        <button id="btn-repair-wish" class="ghost" type="button">Repair Images</button>
        <button id="btn-clear-wish" class="ghost" type="button">Clear</button>
      </div>
    </div>
    <div id="grid-wish" class="grid"></div>
  </section>

  <section class="card" data-panel="sell" hidden>
    <div class="section-head">
      <h2>Sell</h2>
      <div class="inline">
        <button id="btn-refresh-sell" class="ghost" type="button">Refresh</button>
        <button id="btn-repair-sell" class="ghost" type="button">Repair Images</button>
        <button id="btn-clear-sell" class="ghost" type="button">Clear</button>
      </div>
    </div>
    <div id="grid-sell" class="grid"></div>
  </section>

  <section class="card" data-panel="sellSets" hidden>
    <div class="section-head">
      <h2>Sell Sets</h2>
      <div class="inline">
        <button id="btn-refresh-sellSets" class="ghost" type="button">Refresh</button>
        <button id="btn-repair-sellSets" class="ghost" type="button">Repair Images</button>
        <button id="btn-clear-sellSets" class="ghost" type="button">Clear</button>
      </div>
    </div>
    <div id="grid-sellSets" class="grid"></div>
  </section>

  <section class="card" data-panel="buy" hidden>
    <div class="section-head">
      <h2>Buy</h2>
      <div class="inline">
        <button id="btn-refresh-buy" class="ghost" type="button">Refresh</button>
        <button id="btn-repair-buy" class="ghost" type="button">Repair Images</button>
        <button id="btn-clear-buy" class="ghost" type="button">Clear</button>
      </div>
    </div>
    <div id="grid-buy" class="grid"></div>
  </section>

  <section class="card" data-panel="pricecheck" hidden>
    <h2>Price Check</h2>
    <div class="row">
      <label class="lbl" for="pc-query">Search (or paste item link/ID)</label>
      <div class="inline">
        <input id="pc-query" type="text" placeholder="e.g., 'Cupid Bow', 123456, or a YoWorld.info link">
        <button id="pc-btn-search" type="button">Search</button>
      </div>
      <div class="hint">Uses api.yoworld.info. Pick an item and copy a “price check” message to ask other players.</div>
    </div>
    <div id="pc-results" class="results"></div>
    <div id="pc-detail" class="card" style="border:1px solid var(--border); border-radius:12px; margin-top:10px;">
      <div class="hint">Select an item to view details.</div>
    </div>
  </section>

  <section class="card" data-panel="settings" hidden>
    <h2>Settings</h2>

    <div class="row">
      <label class="lbl">Backup</label>
      <div class="inline" style="gap:8px; flex-wrap:wrap;">
        <button id="btn-backup-export" type="button">Export Backup (JSON)</button>
        <input id="backup-file" type="file" accept="application/json,.json" />
        <button id="btn-backup-import" type="button">Import Backup</button>
      </div>
      <div class="hint">Export saves your lists/settings to a JSON file. Import will replace your current synced data.</div>
    </div>

    <div class="row">
      <label class="lbl" for="image-source-select">Item image source</label>
      <select id="image-source-select">
        <option value="cdn">YoWorld CDN (fast, sometimes missing)</option>
        <option value="info">YoWorld.info image link (more reliable)</option>
        <option value="auto">Auto (CDN, fallback to YoWorld.info)</option>
      </select>
      <div class="hint">If you see broken images, switch to YoWorld.info or Auto.</div>
    </div>

    <div class="row">
      <label class="lbl" for="theme-select">Color theme</label>
      <select id="theme-select">
        <option value="classic">Classic (Black & White)</option>
        <option value="dark">Dark</option>
        <option value="valentine">Valentine's Day</option>
      </select>
      <div class="hint">Theme syncs across devices.</div>
    </div>
  </section>

  <canvas id="export-canvas" width="1" height="1" style="display:none"></canvas>
  <script src="popup.js"></script>
</body>
</html>
